# Git Workflow - Feature Branch Strategy

Flujo de trabajo con feature branches para el proyecto Garden Monitor.

## Reglas de Oro

1. **SIEMPRE** hacer `git pull origin develop` antes de crear una feature branch
2. **NUNCA** hacer commits directamente en `develop` (solo mediante PRs)
3. **SIEMPRE** trabajar en feature branches
4. Usar nombres descriptivos para las ramas: `feature/nombre-descriptivo`



## Flujo Completo: Crear una Nueva Feature

### 1. Actualizar `develop` local

```bash
git checkout develop
git pull origin develop
```

### 2. Crear feature branch desde `develop` actualizado

```bash
git checkout -b feature/nombre-descriptivo
```

**Ejemplos de nombres:**
- `feature/jpa-entities`
- `feature/centro-educativo-entity`
- `feature/auth-jwt`
- `feature/user-crud-endpoints`
- `fix/usuario-validation`

### 3. Trabajar en la feature

```bash
# Hacer cambios en el código...

# Añadir archivos al staging
git add .

# Commitear con mensaje descriptivo
git commit -m "feat(backend): implement CentroEducativo entity"

# Repetir add/commit según sea necesario
git add ...
git commit -m "..."
```

### 4. Push de la feature branch

```bash
git push origin feature/nombre-descriptivo
```

**Primera vez** que pusheas la rama:
```bash
git push -u origin feature/nombre-descriptivo
```

### 5. Crear Pull Request en GitHub

1. Ve a GitHub: https://github.com/riordi80/vocational-training-final-project
2. Verás un mensaje: "Compare & pull request"
3. Selecciona: `feature/nombre-descriptivo` → `develop`
4. Añade descripción del PR
5. Crea el Pull Request
6. Revisa los cambios
7. **Merge** el PR (botón verde "Merge pull request")

### 6. Actualizar `develop` local después del merge

```bash
git checkout develop
git pull origin develop
```

### 7. Eliminar feature branch mergeada (opcional pero recomendado)

```bash
# Local
git branch -d feature/nombre-descriptivo

# Remoto (GitHub normalmente lo hace automáticamente)
git push origin --delete feature/nombre-descriptivo
```

---



## Flujo de Merge: develop → main

Solo cuando una **fase completa** esté terminada:

### Mediante Pull Request

1. Asegurarte de que `develop` está actualizado:

   ```bash
   git checkout develop
   git pull origin develop
   git push origin develop
   ```

2. Crear PR en GitHub: `develop` → `main`

3. Revisar cambios

4. Merge del PR

5. Actualizar `main` local:

   ```bash
   git checkout main
   git pull origin main
   ```

---

## Mensajes de Commit

Usar conventional commits:

```
feat(scope): descripción corta

- Detalle 1
- Detalle 2
```

**Tipos:**

- `feat`: Nueva funcionalidad
- `fix`: Corrección de bug
- `docs`: Cambios en documentación
- `refactor`: Refactorización de código
- `test`: Añadir tests
- `chore`: Tareas de mantenimiento

**Scopes:**

- `backend`, `frontend`, `android`, `esp32`
- `database`, `auth`, `api`

**Ejemplos:**

```
feat(backend): implement CentroEducativo JPA entity
fix(backend): correct equals/hashCode in Usuario entity
docs(readme): update installation instructions
```



## Casos Comunes

### Caso 1: Quiero añadir más commits a una feature branch existente

```bash
# Asegurarte de estar en la feature branch
git checkout feature/nombre-descriptivo

# Hacer cambios...
git add .
git commit -m "mensaje"

# Push
git push origin feature/nombre-descriptivo
```

El PR se actualiza automáticamente con los nuevos commits.

### Caso 2: Mi feature branch está desactualizada con `develop`

Si mientras trabajas en tu feature, `develop` ha avanzado (otros PRs se han mergeado):

```bash
# Desde tu feature branch
git checkout feature/nombre-descriptivo

# Actualizar develop
git checkout develop
git pull origin develop

# Volver a feature y hacer rebase
git checkout feature/nombre-descriptivo
git rebase develop

# Pushear con force (solo en feature branches, NUNCA en develop/main)
git push --force-with-lease origin feature/nombre-descriptivo
```

### Caso 3: Tengo cambios sin commitear y necesito cambiar de rama

```bash
# Guardar cambios temporalmente
git stash

# Cambiar de rama
git checkout otra-rama

# Cuando vuelvas a tu rama, recuperar cambios
git checkout feature/nombre-descriptivo
git stash pop
```

### Caso 4: Me equivoqué y commitee en `develop` en vez de en una feature branch

```bash
# 1. Crear feature branch desde el estado actual (sin checkout)
git branch feature/nombre-descriptivo

# 2. Volver develop al estado remoto
git reset --hard origin/develop

# 3. Cambiar a la feature branch
git checkout feature/nombre-descriptivo

# 4. Ahora tus commits están en la feature branch
git push origin feature/nombre-descriptivo
```

---

## Información del Proyecto

**Nombre**: Garden Monitor - Sistema de Monitorización de Árboles

**Institución**: IES El Rincón

**Curso**: Desarrollo de Aplicaciones Multiplataforma (DAM) 2025-2026

**Repositorio**: [github.com/riordi80/vocational-training-final-project](https://github.com/riordi80/vocational-training-final-project)

**Última actualización**: 2025-12-08

### Colaboradores

[![riordi80](https://img.shields.io/badge/riordi80-100000?style=for-the-badge&logo=github&logoColor=white)](https://github.com/riordi80) [![Enrique36247](https://img.shields.io/badge/Enrique36247-100000?style=for-the-badge&logo=github&logoColor=white)](https://github.com/Enrique36247)

---

**Proyecto Final DAM 2025-2026** | Desarrollado con Spring Boot, React, Android y ESP32
