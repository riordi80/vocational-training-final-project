# Hoja de Ruta - Proyecto Árboles

**Última actualización**: 2026-01-21
**Estado**: [x] Fase 1 COMPLETADA | [x] Fase 2 COMPLETADA | [x] Fase 3 COMPLETADA | [x] Fase 4 COMPLETADA | [x] Fase 5 COMPLETADA | [x] DESPLIEGUE COMPLETADO | [x] Fase 6 COMPLETADA

 **DEADLINE: 8 DE DICIEMBRE 2025** 

---

## REQUISITOS ACADÉMICOS

### [PGV] Backend

**Noviembre**:
- [x] 2 endpoints con relación 1:N (GET, POST, PUT, DELETE)
- [x] Validaciones de datos

**Diciembre** (si da tiempo):
- [ ] 2-3 endpoints con relación N:M (GET, POST, PUT, DELETE)

---

### [DAD] Frontend React

**Estructura:**
- [x] Componentes organizados y reutilizables
- [x] React Router Dom
- [x] Login + Register (aunque no sean funcionales)
- [x] Mínimo 4 ventanas (sin contar login/register)

**Consumo API:**
- [x] Tantos CRUD como sean necesarios (Árboles completo)

**Diseño:**
- [x] Estilización (Tailwind o similar)
- [x] Formularios con validaciones (Login/Register/Árboles)
- [x] Navegación clara (menú hamburguesa, cabecera responsive)

**Requisitos funcionales/no funcionales:**
- [x] Responsive (completo con menú hamburguesa)
- [x] Login/Register con persistencia (LocalStorage/SessionStorage/Cookies)
- [x] Desplegar en Vercel (COMPLETADO - https://vocational-training-final-project.vercel.app/)
- [x] Navegación dinámica
- [x] Gestión de CRUD establecidos (Árboles completo)
- [x] Establecer roles (mock básico implementado)
- [x] Feedback al usuario (mensajes éxito/error, componentes Alert)

---

### [AED] Acceso a Datos

- [x] Diseño esquema E/R
- [x] Transformación E/R → UML
- [x] Transformación UML → Relacional
- [x] Mapeo objeto-relacional (ORM)
- [x] Mínimo 2 entidades con 1 relación (HECHO: 4 entidades)
- [x] Documentación del modelo de datos
- [x] Gestor de tareas Git
- [x] Manual de instalación (MANUAL_DE_INSTALACION.md)
- [x] Manual de usuario (MANUAL_DE_USUARIO.md)
- [x] Visualización frontend de datos BD (CRUD completo de árboles)

---

### [PGL] Android

- [x] Mínimo 4 actividades (Login, Register, ListarArboles, ArbolDetalles)
- [x] Listar árboles por centro educativo
- [x] Visualizar detalles del árbol con datos tiempo-real (simulados)
- [x] Modificar datos del árbol
- [x] Eliminar árbol

---

## FASES

### Fase 0: Configuración Inicial [x]

- [x] Java 21, Maven, PostgreSQL 16, Node.js, Android Studio
- [x] Repositorio Git
- [x] Base de datos `proyecto_arboles`
- [x] Documentación modelo de datos

---

### Fase 1: Backend - Modelo de Datos [x]

- [x] Proyecto Spring Boot
- [x] Entidades JPA: Usuario, CentroEducativo, Arbol, DispositivoEsp32
- [x] Repositorios JPA
- [x] Relación 1:N: CentroEducativo → Arbol
- [x] Relación 1:1: Arbol ↔ DispositivoEsp32

---

### Fase 2: Backend - Endpoints 1:N [x] 100% COMPLETADO

- [x] **2.1** Validaciones en entidades [x] COMPLETO
  - [x] Arbol: @NotBlank, @Past, @DecimalMin/@Max
  - [x] Arbol: @Valid en controller (POST y PUT)
  - [x] CentroEducativo: @NotBlank, @NotNull

- [x] **2.2** ArbolController [x] COMPLETO
  - [x] GET /api/arboles
  - [x] GET /api/arboles/{id}
  - [x] POST /api/arboles (con @Valid)
  - [x] PUT /api/arboles/{id} (con @Valid)
  - [x] DELETE /api/arboles/{id}
  - [x] Endpoints adicionales (por centro, especie, búsqueda)

- [x] **2.3** CentroEducativoController [x] COMPLETO
  - [x] GET /api/centros
  - [x] GET /api/centros/{id}
  - [x] POST /api/centros (con @Valid)
  - [x] PUT /api/centros/{id} (con @Valid)
  - [x] DELETE /api/centros/{id}
  - [x] GET /api/centros/{id}/arboles (relación 1:N)

- [x] **2.4** Evitar loops JSON [x] COMPLETO
  - [x] @JsonIgnore en List<Arbol> de CentroEducativo

- [x] **2.5** Testing Postman [x] COMPLETO
  - [x] Probar endpoints de Arboles (CRUD completo)
  - [x] Probar endpoints de Centros (CRUD completo)
  - [x] Probar relación 1:N (GET /api/centros/{id}/arboles)
  - [x] Validaciones: nombre vacío (400)
  - [x] Validaciones: duplicados (409)
  - [x] Validaciones: fecha futura @Past (400)

---

### Fase 3: Frontend - Estructura [x] 100% COMPLETADO

- [x] **3.1** Configurar React [x] COMPLETO
  - [x] Proyecto React con Vite ya estaba creado
  - [x] Tailwind CSS v3 instalado y configurado
  - [x] Estructura de carpetas creada
  - [x] Variables de entorno (.env, .env.example)

- [x] **3.2** React Router Dom [x] COMPLETO
  - [x] React Router Dom ya estaba instalado
  - [x] Estructura de rutas básica implementada
  - [x] Rutas placeholder (login, dashboard, 404)

- [x] **3.3** Axios [x] COMPLETO
  - [x] Instalado axios
  - [x] api.js con baseURL y configuración
  - [x] Interceptors configurados (request/response)

- [x] **3.4** Context de autenticación [x] COMPLETO
  - [x] AuthContext.jsx
  - [x] Gestión de roles (mock)
  - [x] Persistencia con localStorage

- [x] **3.5** Layout responsive [x] COMPLETO
  - [x] Header.jsx (responsive)
  - [x] MainLayout.jsx
  - [x] ProtectedRoute.jsx

- [x] **3.6** Login.jsx [x] COMPLETO
  - [x] Formulario email/password
  - [x] Persistencia localStorage
  - [x] Validaciones
  - [x] Feedback (mensajes éxito/error)

- [x] **3.7** Register.jsx [x] COMPLETO
  - [x] Formulario
  - [x] Validaciones
  - [x] Feedback (mensajes éxito/error)

- [x] **3.8** Dashboard.jsx [x] COMPLETO
  - [x] Bienvenida personalizada
  - [x] Tarjetas de acceso rápido (Árboles, Centros)
  - [x] Responsive

---

### Fase 4: Frontend - CRUD Árboles

- [x] **4.1** Servicios API [x] COMPLETO
  - [x] arbolesService.js (CRUD completo + búsqueda + filtros)
  - [x] centrosService.js (CRUD completo + relación con árboles)
  - [x] Manejo de errores con try/catch y feedback

- [x] **4.2** Componentes comunes [x] COMPLETO
  - [x] Button.jsx (reutilizable con variantes)
  - [x] Input.jsx (reutilizable con validaciones)
  - [x] Alert.jsx (mensajes éxito/error/warning/info)
  - [x] Spinner.jsx (loading con diferentes tamaños)

- [x] **4.3** ListadoArboles.jsx [x] COMPLETO
  - [x] Tabla/grid responsive (desktop y mobile)
  - [x] Botón añadir árbol
  - [x] Filtro por centro con dropdown
  - [x] Feedback (Spinner loading, Alert errores)
  - [x] Navegación al detalle (click en fila)

- [x] **4.4** DetalleArbol.jsx [x] COMPLETO
  - [x] Datos del árbol (información general y umbrales)
  - [x] Botones editar/eliminar/volver
  - [x] Modal de confirmación para eliminar
  - [x] Responsive
  - [x] Feedback (loading, errores, árbol no encontrado)

- [x] **4.5** FormularioArbol.jsx [x] COMPLETO
  - [x] Crear/editar en el mismo componente (modo dual)
  - [x] Validaciones completas (campos obligatorios, fecha no futura, umbrales)
  - [x] Feedback (éxito/error con navegación y state)
  - [x] Responsive (grid adaptativo)
  - [x] Select de centros educativos
  - [x] Manejo de umbrales opcionales

- [x] **4.6** Rutas [x] COMPLETO
  - [x] /arboles (ListadoArboles)
  - [x] /arboles/nuevo (FormularioArbol - crear)
  - [x] /arboles/:id (DetalleArbol)
  - [x] /arboles/:id/editar (FormularioArbol - editar)

- [x] **4.7** Testing, mejoras responsive y despliegue [COMPLETO]
  - [x] Probar CRUD completo
  - [x] Verificar responsive
  - [x] Menú hamburguesa implementado
  - [x] Refactorización Login/Register con componentes comunes
  - [x] Header usando componente Button
  - [x] Preparar para Vercel (vercel.json configurado, documentación actualizada)

---

### DESPLIEGUE - COMPLETADO

- [x] **Frontend en Vercel**
  - [x] URL: https://vocational-training-final-project.vercel.app/
  - [x] Configuración de variable de entorno VITE_API_BASE_URL
  - [x] Build y deploy automático desde rama main
  - [x] Responsive verificado en producción

- [x] **Backend en Render**
  - [x] URL: https://proyecto-arboles-backend.onrender.com
  - [x] Configuración con Dockerfile (multi-stage build)
  - [x] Java 21 + Spring Boot 3.x
  - [x] Deploy automático desde rama main
  - [x] Configuración CORS implementada

- [x] **Base de Datos PostgreSQL en Render**
  - [x] PostgreSQL 16 (Internal Database)
  - [x] Configuración con variables de entorno
  - [x] Conexión segura desde backend

- [x] **Integración Frontend-Backend**
  - [x] Configuración CORS correcta (allowedOriginPatterns)
  - [x] Comunicación verificada y funcionando
  - [x] CRUD completo operativo en producción

---

### Fase 5: Android - CRUD Árboles [x] COMPLETADA

- [x] **5.1** Configurar Android [x] COMPLETO
  - [x] Retrofit 2.9.0, Gson 2.10.1, OkHttp 4.11.0
  - [x] Permisos INTERNET y ACCESS_NETWORK_STATE

- [x] **5.2** Retrofit [x] COMPLETO
  - [x] RetrofitClient.java configurado con URL Render
  - [x] ArbolApi.java con todos los endpoints CRUD
  - [x] Timeouts: 60 segundos (adecuado para Render free tier)
  - [x] BigDecimalStringAdapter para manejo de números

- [x] **5.3** Modelos [x] COMPLETO
  - [x] Arbol.java (id, nombre, especie, fecha, ubicación, sensores)
  - [x] CentroEducativo.java (id, nombre)
  - [x] Anotaciones @SerializedName para mapeo JSON

- [x] **5.4** LoginActivity [x] COMPLETO
  - [x] Layout con validación de campos
  - [x] Mock login funcional
  - [x] Navegación a ListarArboles

- [x] **5.5** ListadoArbolesActivity [x] COMPLETO
  - [x] RecyclerView con ArbolAdapter optimizado
  - [x] Carga desde API Render con fallback local
  - [x] Click en item para ver detalles
  - [x] Botón eliminar con diálogo de confirmación

- [x] **5.6** DetalleArbolActivity [x] COMPLETO
  - [x] Visualización completa de datos del árbol
  - [x] Datos simulados de sensores (temperatura, humedad, CO2, humedad suelo)
  - [x] Modo edición con toggle TextViews/EditTexts
  - [x] Actualización en API con PUT

- [x] **5.7** Funcionalidad Editar [x] COMPLETO
  - [x] Modo edición integrado en ArbolDetalles
  - [x] Validaciones en campos
  - [x] Botones Guardar/Cancelar
  - [x] Actualización en API

---

### Fase 6: Documentación [x] COMPLETADA

- [x] **6.1** Manual de instalación [x] COMPLETO
  - [x] Requisitos generales
  - [x] Backend (referencia a README)
  - [x] Frontend (referencia a README)
  - [x] Android (referencia a manual específico)
  - [x] Base de datos (PostgreSQL + TimescaleDB)

- [x] **6.2** Manual de usuario [x] COMPLETO
  - [x] Aplicación Web (registro, login, CRUD árboles, responsive)
  - [x] Aplicación Android (referencia a manual específico)
  - [x] FAQ extensa (15+ preguntas)
  - [x] Flujos de trabajo comunes
  - [x] Glosario de términos

---

## [ ] PRE-PUBLICACIÓN (antes de subir a Play Store)

### Android - Optimización del APK
- [ ] Activar `isMinifyEnabled = true` en `android/app/build.gradle.kts` (buildTypes → release)
- [ ] Activar `isShrinkResources = true` para reducir tamaño del APK
- [ ] Configurar reglas en `proguard-rules.pro` si hay errores de ofuscación (ClassNotFoundException, etc.)
- [ ] Probar APK release exhaustivamente (todas las funcionalidades)
- [ ] Firmar APK/AAB con keystore de producción (no el de debug)

### Android - Build Variant
- [ ] Verificar que se usa el variant `productionRelease` para el APK final

### General
- [ ] Revisar que todas las URLs apuntan a producción
- [ ] Eliminar logs de debug innecesarios
- [ ] Revisar permisos del AndroidManifest.xml

---

## [ ] OPCIONAL (después del 8 dic)

### Fase 7: Endpoints N:M
- Usuario ↔ CentroEducativo
- GET, POST, PUT, DELETE
- [ ] Eliminar filtrado temporal de permisos en frontend (las páginas de árboles y centros filtran datos con JS mientras el backend no tenga roles - ver 02b. HOJA_RUTA_ROLES.md, sección "Notas para Futuro")

### Fase 8: Mejoras
- Sistema lecturas TimescaleDB
- Sistema alertas
- ESP32

---

## Información del Proyecto

**Nombre**: Garden Monitor - Sistema de Monitorización de Árboles

**Institución**: IES El Rincón

**Curso**: Desarrollo de Aplicaciones Multiplataforma (DAM) 2025-2026

**Repositorio**: [github.com/riordi80/vocational-training-final-project](https://github.com/riordi80/vocational-training-final-project)

**Última actualización**: 2026-01-21

### Colaboradores

[![riordi80](https://img.shields.io/badge/riordi80-100000?style=for-the-badge&logo=github&logoColor=white)](https://github.com/riordi80) [![Enrique36247](https://img.shields.io/badge/Enrique36247-100000?style=for-the-badge&logo=github&logoColor=white)](https://github.com/Enrique36247)

---

**Proyecto Final DAM 2025-2026** | Desarrollado con Spring Boot, React, Android y ESP32
